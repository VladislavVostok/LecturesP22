
Для создания приложений на основе Razor Pages в Visual Studio имеется готовый шаблон - ASP.NET Core Web App (Razor Pages). Выберем его в качестве шаблона проекта.

На следующем шаге необходимо будет указать имя проекта и его расположение. Допустим, проект будет называться HelloRazorPagesApp:

![[1.2.png]]
Далее можно будет указать версию .NET и еще ряд настроек. Оставим все настройки по умолчанию и нажмем на кнопку Create для создания проекта:

![[1.3.png]]
После создания проект будет иметь следующую структуру:
![[1.4.png]]

Эта та же структура, которая создается с помощью .NET CLI:

- **Dependencies**: все добавленные в проект пакеты и библиотеки
    
- **Properties**: содержит настройки проекта, в частности, файл launchSettings.json, который определяет настройки запуска проекта
    
- **wwwroot**: эта папка предназначен для хранения статических файлов. По умолчанию здесь уже есть ряд скриптов javascript и файлов css, в частности, файлы фреймворка bootstrap и библиотек валидации.
    
- **Pages**: содержит все страницы Razor. По умолчанию здесь имеются следующие файлы:
    
    - **_Layout.cshtml**: мастер-страница, в которую вставляются страницы Razor
        
    - _**ViewStart.cshtml**: задает мастер-страницу
        
    - **_ViewImports.cshtml**: определяет директивы Razor, которые добавляются на каждую страницу Razor
        
    - **_ValidationScriptsPartial.cshtml**: частичное представление, которое подключает js-скрипты валидации на стороне клиента
        
    - **Index.cshtml**, **Error.cshtml** и **Privacy.cshtml**: собственно страницы Razor, которые определяют визуальную часть страницы и логику обработки запроса.
        
- **appsettings.json**: хранит конфигурацию приложения
    
- **Program.cs**: файл, который определяет класс Program, с которого начинается работа приложения. То есть это входная точка в приложение.

И если мы запустим проект на выполнение, то сработает запрос к странице Razor по умолчанию - странице Index.cshtml, на основе которой и будет сгенерирована html-страница, которую мы увидим в своем веб-браузере:

![[1.15 1.png]]

## Добавление RazorPages в пустой проект

Visual Studio предоставляет готовый шаблон для создания проекта Razor Pages. Однако иногда может возникнуть необходимость добавить функциональность Razor Pages в другие типы проектов или вообще создать проект с нуля. Поэтому рассмотрим, как добавлять функциональность и страницы RazorPages в пустой проект ASP NET Core. Если мы работаем в Visual Studio, то создадим по типу **ASP NET Core Empty**

![[1.6.png]]
Если мы работаем через .NET CLI, то создадим проект по типу webapp, выполнив в терминале команду

```sh
dotnet new web
```

После создания проекта первым делом подключим в него функциональность Razor Pages. Для этого откроем файл Program.cs. По умолчанию он имеет примерно следующее содержимое:

```cs
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
 
app.MapGet("/", () => "Hello World!");
 
app.Run();
```

Изменим его следующим образом:

```cs
var builder = WebApplication.CreateBuilder(args);
 
// добавляем в приложение сервисы Razor Pages
 
var app = builder.Build();
 
// добавляем поддержку маршрутизации для Razor Pages
app.MapRazorPages();  
 
app.Run();
```

### Добавление страницы Razor Page

Теперь добавим страницу Razor. И в начале определим в проекте папку Pages для хранения Razor Pages. Далее в эту папку добавим новую страницу Razor.

Если мы работаем в Visual Studio, то для добавления нажмем на данную папку правой кнопкой мыши и выберем в контекстном меню пункт Add -> New Item. Далее среди шаблонов выберем шаблон Razor Page - Empty и назовем новый файл Index.cshtml:
![[1.9.png]]

После создания этой страницы в проект в папку Pages будут добавлены два файла - сама страница Index.cshtml и связанный с ней файл кода **Index.cshtml.cs**.

![[1.10.png]]

Если мы НЕ работаем в Visual Studio, то надо в папке Pages создать текстовый файл `Index.cshtml`.

При добавлении в Visual Studio файл Index.cshtml по умолчанию выглядит следующим образом:

```cs
@page
@model RazorPagesApp.Pages.IndexModel
@{
}
```

Фактически это пустая страница. Директива @page указывает, что это страница Razor. А директива @model - в данном случае это класс привязанного к странице кода IndexModel. Согласно условностям класс модели называется по имени страницы плюс суффикс "Model".

А файл Index.cshtml.cs при добавлении в Visual Studio содержит простейшее определение модели IndexModel:

```cs
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;
 
namespace RazorPagesApp.Pages
{
    public class IndexModel : PageModel
    {
        public void OnGet()
        {
        }
    }
}
```

В классе модели определен метод OnGet(). Этот метод обрабатывает GET-запросы. В данном случае он пуст. В реальности в данном случае он нам не понадобится.

В дальнейшем мы подробно разберем обработку запросов в Razor Pages. А пока определим на странице какое-нибудь простейшее содержимое. Для этого изменим файл Index.cshtml следующим образом:


```cs
@page
 
<h2>Shalom Shabbat</h2>
```